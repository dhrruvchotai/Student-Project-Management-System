generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model projectgroup {
  projectgroupid                            Int                  @id @default(autoincrement())
  projectgroupname                          String               @db.VarChar(255)
  projecttypeid                             Int?
  guidestaffname                            String?              @db.VarChar(255)
  projecttitle                              String?              @db.VarChar(500)
  projectarea                               String?              @db.VarChar(255)
  projectdescription                        String?
  averagecpi                                Decimal?             @db.Decimal(4, 2)
  convenerstaffid                           Int?
  expertstaffid                             Int?
  description                               String?
  created                                   DateTime?            @default(now()) @db.Timestamp(6)
  modified                                  DateTime?            @default(now()) @db.Timestamp(6)
  staff_projectgroup_convenerstaffidTostaff staff?               @relation("projectgroup_convenerstaffidTostaff", fields: [convenerstaffid], references: [staffid], onDelete: NoAction, onUpdate: NoAction)
  staff_projectgroup_expertstaffidTostaff   staff?               @relation("projectgroup_expertstaffidTostaff", fields: [expertstaffid], references: [staffid], onDelete: NoAction, onUpdate: NoAction)
  projecttype                               projecttype?         @relation(fields: [projecttypeid], references: [projecttypeid], onDelete: NoAction, onUpdate: NoAction)
  projectgroupmember                        projectgroupmember[]
  projectmeeting                            projectmeeting[]
}

model projectgroupmember {
  projectgroupmemberid Int           @id @default(autoincrement())
  projectgroupid       Int?
  studentid            Int?
  isgroupleader        Int?          @default(0) @db.SmallInt
  studentcgpa          Decimal?      @db.Decimal(4, 2)
  description          String?
  created              DateTime?     @default(now()) @db.Timestamp(6)
  modified             DateTime?     @default(now()) @db.Timestamp(6)
  projectgroup         projectgroup? @relation(fields: [projectgroupid], references: [projectgroupid], onDelete: Cascade, onUpdate: NoAction)
  student              student?      @relation(fields: [studentid], references: [studentid], onDelete: Cascade, onUpdate: NoAction)
}

model projectmeeting {
  projectmeetingid         Int                        @id @default(autoincrement())
  projectgroupid           Int?
  guidestaffid             Int?
  meetingdatetime          DateTime                   @db.Timestamp(6)
  meetingpurpose           String?                    @db.VarChar(500)
  meetinglocation          String?                    @db.VarChar(255)
  meetingnotes             String?
  meetingstatus            String?                    @default("Scheduled") @db.VarChar(50)
  meetingstatusdescription String?
  meetingstatusdatetime    DateTime?                  @db.Timestamp(6)
  description              String?
  created                  DateTime?                  @default(now()) @db.Timestamp(6)
  modified                 DateTime?                  @default(now()) @db.Timestamp(6)
  staff                    staff?                     @relation(fields: [guidestaffid], references: [staffid], onDelete: NoAction, onUpdate: NoAction)
  projectgroup             projectgroup?              @relation(fields: [projectgroupid], references: [projectgroupid], onDelete: Cascade, onUpdate: NoAction)
  projectmeetingattendance projectmeetingattendance[]
}

model projectmeetingattendance {
  projectmeetingattendanceid Int             @id @default(autoincrement())
  projectmeetingid           Int?
  studentid                  Int?
  ispresent                  Int?            @default(0) @db.SmallInt
  attendanceremarks          String?
  description                String?
  created                    DateTime?       @default(now()) @db.Timestamp(6)
  modified                   DateTime?       @default(now()) @db.Timestamp(6)
  projectmeeting             projectmeeting? @relation(fields: [projectmeetingid], references: [projectmeetingid], onDelete: Cascade, onUpdate: NoAction)
  student                    student?        @relation(fields: [studentid], references: [studentid], onDelete: Cascade, onUpdate: NoAction)
}

model projecttype {
  projecttypeid   Int            @id @default(autoincrement())
  projecttypename String         @db.VarChar(100)
  description     String?
  created         DateTime?      @default(now()) @db.Timestamp(6)
  modified        DateTime?      @default(now()) @db.Timestamp(6)
  projectgroup    projectgroup[]
}

model staff {
  staffid                                          Int              @id @default(autoincrement())
  staffname                                        String           @db.VarChar(255)
  phone                                            String?          @db.VarChar(20)
  email                                            String?          @unique @db.VarChar(100)
  password                                         String           @db.VarChar(255)
  description                                      String?
  created                                          DateTime?        @default(now()) @db.Timestamp(6)
  modified                                         DateTime?        @default(now()) @db.Timestamp(6)
  projectgroup_projectgroup_convenerstaffidTostaff projectgroup[]   @relation("projectgroup_convenerstaffidTostaff")
  projectgroup_projectgroup_expertstaffidTostaff   projectgroup[]   @relation("projectgroup_expertstaffidTostaff")
  projectmeeting                                   projectmeeting[]
}

model student {
  studentid                Int                        @id @default(autoincrement())
  studentname              String                     @db.VarChar(255)
  phone                    String?                    @db.VarChar(20)
  email                    String?                    @unique @db.VarChar(100)
  description              String?
  created                  DateTime?                  @default(now()) @db.Timestamp(6)
  modified                 DateTime?                  @default(now()) @db.Timestamp(6)
  projectgroupmember       projectgroupmember[]
  projectmeetingattendance projectmeetingattendance[]
}
